<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>WOW</title>
<style>
:root{
  --bg:#000a00;
  --text:#7CFF7C;
  --muted:#4a8b4a;
  --glow:rgba(124,255,124,0.1);
}
html,body{
  height:100%;
  margin:0;
  background: linear-gradient(#001200,#000800);
  color:var(--text);
  font-family:"VT323","Courier New",monospace;
  display:flex;
  align-items:center;
  justify-content:center;
}
.screen{width:90%;max-width:800px;padding:2rem;border:4px solid rgba(10,40,10,0.7);background:linear-gradient(180deg,rgba(0,20,0,0.9),rgba(0,10,0,0.85));border-radius:8px;position:relative;overflow:hidden;box-shadow:0 0 40px black,0 0 60px rgba(0,255,0,0.05) inset;}
h1{text-align:center;font-size:28px;margin-top:0;text-shadow:0 0 8px var(--glow);}
p.lead{text-align:center;color:var(--muted);font-size:14px;}
form{display:flex;gap:10px;margin-top:20px;justify-content:center;}
input{flex:1;max-width:300px;background:transparent;border:1px solid rgba(124,255,124,0.1);padding:10px;border-radius:4px;color:var(--text);font-size:16px;outline:none;text-align:center;}
button{background:linear-gradient(#0b3,#074);color:#001;border:0;border-radius:4px;padding:10px 14px;cursor:pointer;font-weight:bold;}
.messages{margin-top:20px;display:flex;flex-direction:column;gap:10px;max-height:300px;overflow-y:auto;padding-right:5px;}
.message{max-width:70%;padding:8px 12px;border-radius:6px;border:1px solid rgba(124,255,124,0.1);background:rgba(0,30,0,0.4);word-break:break-word;}
.mine{align-self:flex-start;background:rgba(100,255,100,0.2);border-color:rgba(124,255,124,0.5);color:#B8FFB8;font-weight:bold;}
.other{align-self:flex-end;opacity:0.7;}
.status{color:var(--muted);font-size:14px;margin-top:10px;text-align:center;}
.screen::before{content:"";position:absolute;inset:0;background:linear-gradient(transparent 85%,rgba(0,0,0,0.15) 86%);background-size:100% 6px;animation:scan 3s linear infinite;mix-blend-mode:overlay;pointer-events:none;opacity:0.8;}
@keyframes scan{from{background-position-y:0;}to{background-position-y:6px;}}
.screen::after{content:"";position:absolute;inset:0;background:repeating-linear-gradient(90deg,rgba(255,255,255,0.02) 0 1px,transparent 1px 12px);animation:stripes 6s linear infinite;opacity:0.05;pointer-events:none;}
@keyframes stripes{from{transform:translateX(0);}to{transform:translateX(-40px);}}
</style>
</head>
<body>
<div class="screen">
  <h1>ðŸ’¬ IP Messenger</h1>
  <p class="lead">You can send 2 messages per day per IP</p>
  <div class="messages" id="messages"></div>
  <form id="chatForm">
    <input type="text" id="messageInput" placeholder="Type your message..." required maxlength="200"/>
    <button type="submit">Send</button>
  </form>
  <div class="status" id="status"></div>
</div>

<script>
// ==== CONFIG ====
// Replace with your own JSONBin info
const BIN_ID = "YOUR_BIN_ID";
const SECRET_KEY = "YOUR_SECRET_KEY";
const API_URL = `https://api.jsonbin.io/v3/b/${BIN_ID}`;
const HEADERS = {
  "Content-Type": "application/json",
  "X-Master-Key": SECRET_KEY
};

const messagesEl = document.getElementById('messages');
const form = document.getElementById('chatForm');
const input = document.getElementById('messageInput');
const statusEl = document.getElementById('status');

let myIP = null;
const maxMessagesPerDay = 2;

// Track daily usage
const today = new Date().toDateString();
if(localStorage.getItem('lastReset') !== today){
  localStorage.setItem('lastReset', today);
  localStorage.setItem('dailyCount', '0');
}
let dailyCount = parseInt(localStorage.getItem('dailyCount')) || 0;

// Get IP
fetch('https://api.ipify.org?format=json')
  .then(r=>r.json())
  .then(d=>{ myIP = d.ip; statusEl.textContent = `Your IP: ${myIP}`; loadMessages(); })
  .catch(()=>statusEl.textContent='Failed to detect IP');

// Load messages from JSONBin
async function loadMessages(){
  const res = await fetch(API_URL, { headers: HEADERS });
  const data = await res.json();
  const allMessages = data.record || [];
  messagesEl.innerHTML = '';
  allMessages.forEach(m=>{
    const div = document.createElement('div');
    div.className = 'message ' + (m.ip === myIP ? 'mine' : 'other');
    div.textContent = m.text;
    messagesEl.appendChild(div);
  });
  messagesEl.scrollTop = messagesEl.scrollHeight;
}

// Send message
async function sendMessage(text){
  if(dailyCount >= maxMessagesPerDay){ alert("Daily limit reached"); return; }

  // Get latest messages first
  const res = await fetch(API_URL, { headers: HEADERS });
  const data = await res.json();
  const allMessages = data.record || [];

  allMessages.push({ ip: myIP || "unknown", text, time: Date.now() });

  await fetch(API_URL, {
    method: "PUT",
    headers: HEADERS,
    body: JSON.stringify(allMessages)
  });

  dailyCount++;
  localStorage.setItem('dailyCount', dailyCount);
  loadMessages();
}

// Form submit
form.addEventListener('submit', e=>{
  e.preventDefault();
  const text = input.value.trim();
  if(!text) return;
  sendMessage(text);
  input.value = '';
});

// Auto-refresh every 5 seconds
setInterval(loadMessages, 5000);
</script>
</body>
</html>
